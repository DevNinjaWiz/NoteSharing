<div class="dashboard">
  <aside class="dashboard__sidebar" aria-label="Primary navigation">
    <div class="dashboard__sidebarInner">
      <div class="dashboard__brand">
        <span class="material-symbols-outlined fill" aria-hidden="true">
          edit_square
        </span>
        <div>
          <p class="dashboard__brandTitle">Notes</p>
          <p class="dashboard__brandSubtitle">Sharing</p>
        </div>
      </div>

      <nav class="dashboard__nav" aria-label="Views">
        <h3>Library</h3>
        <ul>
          <li *ngFor="let link of sideNavLinks">
            <button
              class="dashboard__navButton"
              type="button"
              [class.is-active]="link.isPrimary"
            >
              <span
                class="material-symbols-outlined"
                [class.fill]="link.isPrimary"
                aria-hidden="true"
              >
                {{ link.icon }}
              </span>
              <span>{{ link.label }}</span>
            </button>
          </li>
        </ul>
      </nav>

      <div class="dashboard__notebooks" aria-label="Notebooks">
        <header>
          <h3>Notebooks</h3>
          <button type="button" aria-label="Add notebook">
            <span class="material-symbols-outlined" aria-hidden="true">
              add
            </span>
          </button>
        </header>
        <ul>
          <li *ngFor="let notebook of notebooks">
            <button type="button">
              <span
                class="material-symbols-outlined"
                aria-hidden="true"
              >
                {{ notebook.icon }}
              </span>
              <span>{{ notebook.name }}</span>
            </button>
          </li>
        </ul>
      </div>
    </div>

    <button
      class="dashboard__primaryAction"
      type="button"
      (click)="createNewNote()"
    >
      <span class="material-symbols-outlined" aria-hidden="true"> add </span>
      <span>New Note</span>
    </button>
  </aside>

  <main class="dashboard__main">
    <header class="dashboard__topbar">
      <label class="dashboard__search" aria-label="Search notes">
        <span class="material-symbols-outlined" aria-hidden="true">
          search
        </span>
        <input
          type="search"
          placeholder="Search notes..."
          name="note-search"
        />
      </label>
      <div class="dashboard__topbarActions">
        <button
          class="dashboard__iconButton"
          type="button"
          (click)="toggleTheme()"
          [attr.aria-label]="theme() === 'dark' ? 'Switch to light theme' : 'Switch to dark theme'"
        >
          <span class="material-symbols-outlined" aria-hidden="true">
            {{ theme() === 'dark' ? 'light_mode' : 'dark_mode' }}
          </span>
        </button>
        <button
          class="dashboard__iconButton"
          type="button"
          aria-label="Show notifications"
        >
          <span class="material-symbols-outlined" aria-hidden="true">
            notifications
          </span>
        </button>
        <span class="dashboard__avatar" aria-hidden="true">
          <img
            src="https://lh3.googleusercontent.com/aida-public/AB6AXuAWcP321vOGDafKGx0-Huw1tA4gzsv3oVnXCJ0gC7cAMcL-qNj5-5hY_NPCngH-yRLa8g_02MxZVm-9U-01ucBxq4gmFA0Bl-NWB4CWcv2BNLxQmPAZ-xHZJQmyzUJfaJ-j6FtQo8HRoCaBa3DVouThIrjWKnkFGttIDZe23F_OCYqLm6Ni1chKu08u_WbAPuwOv8XJf7JtxiFPSjn31bfFnBBbQzH8GJFLo9mc7-GnWfNWdKQjNBd3ALdTiwRhy9cejHTkyr4dAqU"
            alt="User avatar"
            loading="lazy"
          />
        </span>
      </div>
    </header>

    <section class="dashboard__content">
      <div class="dashboard__heading">
        <div>
          <p class="dashboard__eyebrow">Workspace overview</p>
          <h1>All Notes</h1>
          <p class="dashboard__meta">
            {{ totalNotes() }} {{ totalNotes() === 1 ? 'note' : 'notes' }}
          </p>
        </div>
        <div class="dashboard__toolbar">
          <button type="button" class="dashboard__sort">
            <span>Sort by date</span>
            <span class="material-symbols-outlined" aria-hidden="true">
              expand_more
            </span>
          </button>
          <div class="dashboard__viewToggle">
            <button type="button" class="is-active" aria-label="Grid view">
              <span class="material-symbols-outlined" aria-hidden="true">
                grid_view
              </span>
            </button>
            <button type="button" aria-label="List view">
              <span class="material-symbols-outlined" aria-hidden="true">
                list
              </span>
            </button>
          </div>
        </div>
      </div>

      <p class="dashboard__status" *ngIf="isLoading()">
        <span class="material-symbols-outlined" aria-hidden="true">
          refresh
        </span>
        Syncing notes...
      </p>

      <p class="dashboard__status dashboard__status--error" *ngIf="error()">
        <span class="material-symbols-outlined" aria-hidden="true">
          warning
        </span>
        {{ error() }}
      </p>

      <div class="dashboard__grid" *ngIf="notes().length; else emptyNotes">
        <article
          class="note-card"
          *ngFor="let note of notes(); trackBy: trackNote; let i = index"
        >
          <div
            class="note-card__preview"
            role="img"
            [style.background-image]="backgroundForNote(i)"
            aria-label="Note cover art"
          ></div>
          <div class="note-card__body">
            <h2>{{ note.title || 'Untitled note' }}</h2>
            <p class="note-card__excerpt">
              {{ notePreview(note) }}
            </p>
            <p class="note-card__meta">
              Edited {{ formatUpdatedAt(note) }}
            </p>
          </div>
        </article>
      </div>

      <ng-template #emptyNotes>
        <div class="dashboard__empty">
          <span class="material-symbols-outlined" aria-hidden="true">
            bookmark_add
          </span>
          <h2>Start your first note</h2>
          <p>
            Capture meeting recaps, ideas, and todos. Your notes will
            appear here once saved.
          </p>
          <button type="button" (click)="createNewNote()">
            Create a note
          </button>
        </div>
      </ng-template>
    </section>
  </main>
</div>
